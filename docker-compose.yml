services:
  express-app:
    build: .
    container_name: modulo-anagrafica-container
    restart: always  # <--- QUESTA Ã¨ la riga magica per la VPS
    ports:
      - "127.0.0.1:3000:3000"
    environment:
      - PORT=3000
      - GEMINI_API_KEY=AIzaSyDIcE8aTpsIdrnyx0EVNddC2aZXmixVgnI
      - POCKET_BASE_URI=http://pocketbase:8090 # host che docker usa per raggiungere la macchina
      - POCKET_BASE_USER=lunafastpk@gmail.com
      - POCKET_BASE_PASSWORD=hxoRbL6Mo9c
    volumes:
      - .:/app
      - /app/node_modules
  pocketbase:
    image: ghcr.io/muchobien/pocketbase:latest # Immagine aggiornata e affidabile
    container_name: pocketbase-authenticator-container
    ports:
      - "127.0.0.1:8090:8090" # Accessibile dal bridge Docker
    volumes:
      - ./pb_data:/pb_data
    command:
      - serve
      - --http=0.0.0.0:8090
    restart: always
